(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{0:function(e,t,n){e.exports=n("56d7")},"0a4f":function(e,t,n){"use strict";var r=n("1a09");n.n(r).a},1045:function(e,t,n){"use strict";var r=n("5630");n.n(r).a},"1a09":function(e,t,n){},"1b37":function(e,t,n){},3591:function(e,t,n){"use strict";var r=n("55eb");n.n(r).a},"4a0f":function(e,t,n){},"55eb":function(e,t,n){},5630:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r,a=n("2b0e"),o=(n("a4d3"),n("4de4"),n("b0c0"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),s=n("2f62"),i=(n("a52c"),n("2ed4")),c=(n("537a"),n("ac28")),u={name:"ry-tabbar",components:(r={},Object(o.a)(r,c.a.name,c.a),Object(o.a)(r,i.a.name,i.a),r),data:function(){return{active:0}},watch:{$route:function(e){var t=e.meta.navIndex;null!=t&&(this.active=t)}}},l=n("2877"),m=Object(l.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabbar-box"},[n("van-tabbar",{attrs:{"active-color":"#FF8324"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("van-tabbar-item",{attrs:{icon:"home-o",to:"/"}},[e._v("首页")]),n("van-tabbar-item",{attrs:{icon:"search",to:"/about"}},[e._v("关于")]),n("van-tabbar-item",{attrs:{icon:"cart-o",to:"/card"}},[e._v("信用卡")]),n("van-tabbar-item",{attrs:{icon:"setting-o",to:"/mine"}},[e._v("我的")])],1)],1)}),[],!1,null,null,null).exports;function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p,d={name:"app",components:Object(o.a)({},m.name,m),provide:function(){return{reload:this.reload}},data:function(){return{active:0,isRouterAlive:!0,transitionName:""}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(s.b)(["showLoading","showErrorInfo"])),watch:{$route:function(e,t){t.meta.index&&(e.meta.index==t.meta.index?this.transitionName="":e.meta.index>t.meta.index?this.transitionName="push":this.transitionName="pop")}},methods:{reload:function(){var e=this;this.isRouterAlive=!1,this.$nextTick((function(){e.isRouterAlive=!0}))}}},h=(n("7faf"),Object(l.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:e.transitionName}},[!e.$route.meta.keepAlive&&e.isRouterAlive?n("vue-page-stack",[e.showLoading?n("ry-loading"):e._e(),n("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:e.$route.meta.title,expression:"$route.meta.title"}],staticClass:"router-view"})],1):e._e(),e.$route.meta.keepAlive&&e.isRouterAlive?n("keep-alive",[e.showLoading?n("ry-loading"):e._e(),n("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:e.$route.meta.title,expression:"$route.meta.title"}],staticClass:"router-view"})],1):e._e()],1),n("ry-tabbar",{directives:[{name:"show",rawName:"v-show",value:e.$route.meta.hasFooter,expression:"$route.meta.hasFooter"}]}),n("ry-error-prompt",{attrs:{visible:e.showErrorInfo}})],1)}),[],!1,null,null,null).exports),b=(n("d3b7"),n("8c4f")),v=(n("841c"),n("1276"),n("96cf"),n("9a83"),n("f564")),g=(n("66b9"),n("b650")),w=n("e0ad"),y=n("64f2"),O=n("beaa"),x=n("403b"),j=n("c906"),_=n("4328"),k=n.n(_),$="user";function R(e){return{type:"".concat($,"/login"),payload:e}}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E={name:"ry-home",components:(p={},Object(o.a)(p,x.a.name,x.a),Object(o.a)(p,O.a.name,O.a),Object(o.a)(p,y.a.name,y.a),Object(o.a)(p,w.a.name,w.a),Object(o.a)(p,g.a.name,g.a),p),data:function(){return{simple:j.a,active:0,quantity:25,isFinished:!1,visible:!1,timer:null}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(s.b)(["showNetwork"])),created:function(){this.login()},mounted:function(){},beforeRouteLeave:function(e,t,n){this.$notify.clear(),n()},deactivated:function(){this.$toast.clear()},methods:{$_onRefresh:function(e){var t=e.finishRefresh,n=setTimeout((function(){Object(v.a)({background:"rgba(255,131,36,0.8)",message:"刷新成功"}),t()}),2e3);this.$once("hook:deactivated",(function(){clearTimeout(n),t(),n=null}))},login:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(localStorage.getItem("token")){e.next=5;break}return e.next=4,regeneratorRuntime.awrap(this.hasCode());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),null,this)},hasCode:function(){var e,t,n,r;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(e=k.a.parse(location.search.split("?")[1]),t=encodeURIComponent(location.href.split("#")[0]),e.code){a.next=6;break}location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx0a71240195bf0c4d&redirect_uri=".concat(t,"&response_type=code&scope=snsapi_userinfo#wechat_redirect"),a.next=22;break;case 6:return a.next=8,regeneratorRuntime.awrap(this.$store.dispatch((o={code:e.code},{type:"".concat($,"/getUserWxInfo"),payload:o})));case 8:if(!(n=a.sent).data||!n.data.success){a.next=22;break}return r=n.data.data,a.next=13,regeneratorRuntime.awrap(this.$store.dispatch(R({username:r.openId})));case 13:if(!a.sent.data){a.next=21;break}return localStorage.setItem("loginState","isLogin"),a.next=18,regeneratorRuntime.awrap(this.$store.dispatch({type:"".concat($,"/refreshUserInfo")}));case 18:this.$router.push("/home"),a.next=22;break;case 21:this.$router.push("/register");case 22:case"end":return a.stop()}var o}),null,this)}}},S=(n("0a4f"),Object(l.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[e.showNetwork?[n("ry-result-network")]:e._e(),e.showNetwork?e._e():[n("ry-scroll-view",{attrs:{showRefresh:!0},on:{onRefresh:e.$_onRefresh}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/child"}},[e._v("子页")]),e._v(" | "),n("router-link",{attrs:{to:"/setting"}},[e._v("设置")])],1),n("div",{staticClass:"md-example-child-swiper-0"},[n("md-swiper",{ref:"swiper",attrs:{"is-prevent":!1,"useNative-driver":!1}},e._l(e.simple,(function(t,r){return n("md-swiper-item",{key:r},[n("div",{staticClass:"banner-item",style:{background:""+t.color}},[e._v(e._s(t.text))])])})),1)],1),n("div",{staticClass:"bottom"},[e._v(" 123 ")]),n("van-button",{attrs:{type:"primary"}},[e._v("主要按钮")]),n("van-button",{attrs:{plain:"",type:"primary"}},[e._v("朴素按钮")]),n("van-button",{attrs:{plain:"",hairline:"",type:"primary"}},[e._v("细边框按钮")]),n("p",[e._v("图标展示123")]),n("md-icon",{attrs:{name:"success-color",size:"lg",svg:""}})],1)]],2)}),[],!1,null,null,null).exports);a.a.use(b.a);var P=[{path:"/",name:"ry-home",component:S,meta:{index:1,navIndex:0,keepAlive:!0,hasFooter:!0,title:"融溢首页"}},{path:"/about",name:"ry-about",component:function(){return n.e("about").then(n.bind(null,"f820"))},meta:{index:1,navIndex:1,keepAlive:!0,hasFooter:!0,title:"关于"}},{path:"/mine",name:"ry-mine",component:function(){return n.e("mine").then(n.bind(null,"0a4e"))},meta:{index:1,navIndex:3,keepAlive:!0,hasFooter:!0,title:"我的"}},{path:"/card",name:"ry-card",component:function(){return n.e("card").then(n.bind(null,"7cd5"))},meta:{index:1,navIndex:2,keepAlive:!0,hasFooter:!0,title:"信用卡"}},{path:"/child",name:"ry-child",component:function(){return n.e("child").then(n.bind(null,"6e93"))},meta:{index:2,hasFooter:!1,keepAlive:!1,title:"子页"}},{path:"/setting",name:"ry-setting",component:function(){return n.e("setting").then(n.bind(null,"4ef5"))},meta:{index:2,hasFooter:!1,keepAlive:!0,title:"设置"}},{path:"/register",name:"ry-register",component:function(){return Promise.all([n.e("npm.core-js"),n.e("npm.vant"),n.e("register")]).then(n.bind(null,"7c9c"))},meta:{index:1,title:"注册融溢"}},{path:"/reagree",name:"ry-reagree",component:function(){return n.e("reagree").then(n.bind(null,"2fab"))},meta:{index:2,title:"店主注册协议"}},{path:"/reprotocol",name:"ry-reprotocol",component:function(){return n.e("reagree").then(n.bind(null,"38f4"))},meta:{index:2,title:"用户隐私保护政策"}},{path:"/404",name:"ry-unfound",component:function(){return Promise.resolve().then(n.bind(null,"6312"))},meta:{index:1}},{path:"*",redirect:"/"}],N=new b.a({base:"",scrollBehavior:function(e,t,n){return n||{x:0,y:0}},routes:P}),F=(n("e7e5"),n("d399")),C=n("bc3a"),L=n.n(C),A=n("ff18"),T=L.a.create({baseURL:"http://test-app.tunyukeji.com",timeout:5e3});T.interceptors.request.use((function(e){return V.commit("updateLoading",!0),e}),(function(e){return Promise.resolve(e)})),T.interceptors.response.use((function(e){var t=e.data,n=t.success,r=t.message;switch(V.commit("updateLoading",!1),V.commit("updateNetwork",!1),n){case!0:return Object(A.a)()&&setTimeout((function(){document.body.scrollTop+=1}),0),e;default:return Object(F.a)({message:r,position:"bottom"}),Promise.resolve(e)}}),(function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误(400)";break;case 401:e.message="未授权，请重新登录(401)";break;case 403:e.message="拒绝访问(403)";break;case 404:e.message="请求出错(404)";break;case 408:e.message="请求超时(408)";break;case 500:e.message="服务器错误(500)";break;case 501:e.message="服务未实现(501)";break;case 502:e.message="网络错误(502)";break;case 503:e.message="服务不可用(503)";break;case 504:e.message="网络超时(504)";break;case 505:e.message="HTTP版本不受支持(505)";break;default:e.message="连接出错(".concat(e.response.status,")!")}else e.message="连接服务器失败!";V.commit("updateLoading",!1),401!==e.response.status&&V.commit("updateNetwork",!0),V.commit("updateErrorInfo",{showErrorInfo:!0,errorMessage:e.message});var t={code:-404,message:e.message,data:""};return Promise.resolve(t)}));var D=T,M="/api";var U={namespaced:!0,state:{userInfo:{},isLogin:!1,userWxInfo:{}},mutations:{SAVEUSERINFO:function(e,t){var n=t.data;e.userInfo=n},SAVEUSERWXINFO:function(e,t){var n=t.data;e.userWxInfo=n}},actions:{login:function(e,t){var n,r,a;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.commit,r=t.payload,o.next=4,regeneratorRuntime.awrap((s=r,D({url:"/authentication/login",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:k.a.stringify(s)})));case 4:return(a=o.sent).data&&(n("SAVEUSERINFO",a.data),n("ISLOGIN",!0),localStorage.setItem("token",a.data?a.data.data.token:""),localStorage.setItem("userInfo",a.data?JSON.stringify(a.data.data):""),localStorage.setItem("loginState","isLogin")),o.abrupt("return",a);case 7:case"end":return o.stop()}var s}))},getUserWxInfo:function(e,t){var n,r,a;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=e.commit,r=t.payload,o.next=4,regeneratorRuntime.awrap((s=void 0,s=r.code,D({url:"".concat(M,"/wx/getAccessToken/").concat(s),method:"get"})));case 4:return a=o.sent,n("SAVEUSERWXINFO",a.data),localStorage.setItem("userWxInfo",a.data?JSON.stringify(a.data.data):""),o.abrupt("return",a);case 8:case"end":return o.stop()}var s}))},refreshUserInfo:function(e){var t,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.commit,r.next=3,regeneratorRuntime.awrap((a=void 0,D({url:"".concat(M,"/users/getInfo"),method:"get",params:a})));case 3:return n=r.sent,t("SAVEUSERINFO",n.data),localStorage.setItem("userInfo",n.data?JSON.stringify(n.data.data):""),r.abrupt("return",n);case 7:case"end":return r.stop()}var a}))}}};a.a.use(s.a);var V=new s.a.Store({state:{showLoading:!1,showNetwork:!1,showErrorInfo:!1,errorMessage:""},mutations:{updateLoading:function(e,t){e.showLoading=t},updateNetwork:function(e,t){e.showNetwork=t},updateErrorInfo:function(e,t){var n=t.showErrorInfo,r=t.errorMessage;e.showErrorInfo=n,r&&(e.errorMessage=r)}},actions:{},modules:{user:U}}),W=n("7876"),B=n.n(W),J=n("04e1"),q=n.n(J),z=n("ca95"),X=n.n(z),G=n("5e87"),H=(n("f1dc"),n("6e47")),K=n("c6a1"),Q=n("edb6"),Y={name:"ry-loading",components:Object(o.a)({},Q.a.name,Q.a)},Z=Object(l.a)(Y,(function(){var e=this.$createElement;return(this._self._c||e)("md-activity-indicator",{attrs:{type:"carousel",color:"#FF8324",size:14}})}),[],!1,null,null,null).exports,ee=n("6312"),te=n("a252"),ne={name:"ry-result-network",components:Object(o.a)({},te.a.name,te.a),inject:["reload"],mounted:function(){this.$refs.RyNetwork.addEventListener("click",this.$ry_onrefresh)},beforeDestroy:function(){this.$refs.RyNetwork.removeEventListener("click",this.$ry_onrefresh)},methods:{$ry_onrefresh:function(){this.reload()}}},re=(n("3591"),Object(l.a)(ne,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"RyNetwork",staticClass:"ry-result-page-1"},[t("md-result-page",{staticClass:"resultPage",attrs:{type:"network",subtext:"点击屏幕，重新加载"}})],1)}),[],!1,null,null,null).exports);function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var oe,se={name:"ry-error-prompt",computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(s.b)(["errorMessage"])),props:{visible:{type:Boolean,default:!1}},watch:{visible:function(e){var t=this;if(e){console.log(1234);var n=setTimeout((function(){t.$store.commit("updateErrorInfo",{showErrorInfo:!1}),clearTimeout(n),n=null}),3e3)}}}},ie=(n("7175"),Object(l.a)(se,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"error-box"},[t("transition",{attrs:{name:"ry-slide-up"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],staticClass:"error-info"},[this._v(this._s(this.errorMessage))])])],1)}),[],!1,null,null,null).exports),ce={name:"ry-result-empty",components:Object(o.a)({},te.a.name,te.a),data:function(){return{img:n("8a6f")}}},ue=(n("1045"),Object(l.a)(ce,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"empty-box"},[t("md-result-page",{attrs:{text:"暂无数据","img-url":this.img}})],1)}),[],!1,null,null,null).exports),le=n("0a83"),me=n("baaf"),fe=n("7374"),pe={name:"ry-scroll-view",components:(oe={},Object(o.a)(oe,fe.a.name,fe.a),Object(o.a)(oe,me.a.name,me.a),Object(o.a)(oe,le.a.name,le.a),oe),props:{showRefresh:{type:Boolean,default:!1},showMore:{type:Boolean,default:!1},isFinished:{type:Boolean,default:!1}},methods:{$_onRefresh:function(){this.$emit("onRefresh",{finishRefresh:this.$_onFinishRefresh})},$_onEndReached:function(){this.isFinished||this.$emit("onEndReached",{finishLoadMore:this.$_onFinishLoadMore})},$_onFinishRefresh:function(){this.$refs.scrollView.finishRefresh()},$_onFinishLoadMore:function(){this.$refs.scrollView.reflowScroller(),this.$refs.scrollView.finishLoadMore()}}},de=Object(l.a)(pe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("md-scroll-view",{ref:"scrollView",attrs:{"scrolling-x":!1},on:{refreshing:e.$_onRefresh,"end-reached":e.$_onEndReached},scopedSlots:e._u([{key:"refresh",fn:function(t){var r=t.scrollTop,a=t.isRefreshActive,o=t.isRefreshing;return e.showRefresh?n("md-scroll-view-refresh",{attrs:{"roller-color":"#FF8324","scroll-top":r,"is-refreshing":o,"is-refresh-active":a}}):e._e()}}],null,!0)},[e._t("default"),e.showMore?n("md-scroll-view-more",{attrs:{slot:"more","is-finished":e.isFinished,"loading-text":"更多加载中...","finished-text":"没有更多了"},slot:"more"}):e._e()],2)}),[],!1,null,null,null).exports,he={name:"ry-button",props:{btnShow:{type:Boolean,default:!1},btnTitle:{type:String,default:"确认"}},methods:{onComfirm:function(){this.$emit("touchbefore",!0)},onTouchend:function(){this.$emit("touchafter",!1)}}},be=(n("75f5"),Object(l.a)(he,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"perfect-btn"},[t("p",{staticClass:"perfect-confirm",on:{touchstart:this.onComfirm,touchend:this.onTouchend}},[this._v(this._s(this.btnTitle))]),t("p",{directives:[{name:"show",rawName:"v-show",value:this.btnShow,expression:"btnShow"}],staticClass:"btn-smark"})])}),[],!1,null,null,null).exports),ve={install:function(e){e.component(F.a.name,F.a),e.component(v.a.name,v.a),e.component(K.a.name,K.a),e.component(H.a.name,H.a),e.component(G.a.name,G.a),e.component(Z.name,Z),e.component(ee.default.name,ee.default),e.component(re.name,re),e.component(de.name,de),e.component(ie.name,ie),e.component(ue.name,ue),e.component(be.name,be)}};n("4a0f"),n("5c0c"),n("f5df1"),n("0ae8");a.a.use(B.a),a.a.use(q.a,{router:N}),a.a.use(X.a,{name:"v-touch"}),a.a.use(ve),a.a.config.productionTip=!1,X.a.config.swipe={threshold:80},N.beforeEach((function(e,t,n){var r="isLogin"===window.localStorage.getItem("loginState"),a=e.meta.title?e.meta.title:"融溢";return document.title=a,"/"===e.path||"/reagree"==e.path||"/reprotocol"==e.path?n():r||"/register"===e.path?void n():n("/register")})),new a.a({router:N,store:V,render:function(e){return e(h)}}).$mount("#app")},6312:function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("ade3"),a=n("a252"),o={name:"ry-result-page",components:Object(r.a)({},a.a.name,a.a)},s=(n("aa9f"),n("2877")),i=Object(s.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"ry-result-page-0"},[t("md-result-page",{attrs:{type:"lost"}})],1)}),[],!1,null,null,null);t.default=i.exports},6842:function(e,t,n){},"6e2b":function(e,t,n){},7175:function(e,t,n){"use strict";var r=n("1b37");n.n(r).a},"75f5":function(e,t,n){"use strict";var r=n("6842");n.n(r).a},"7faf":function(e,t,n){"use strict";var r=n("b8ff");n.n(r).a},"8a6f":function(e,t,n){e.exports=n.p+"img/emptyInfo@2x.dc11b288.png"},aa9f:function(e,t,n){"use strict";var r=n("6e2b");n.n(r).a},b8ff:function(e,t,n){},ff18:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){return!!/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)}}},[[0,"runtime","npm.core-js","npm.vant","npm.mand-mobile","npm.axios","npm.vue","npm.hammerjs","npm.regenerator-runtime","npm.vue-page-stack","npm.vue-router","npm.vuex","vendors~app"]]]);