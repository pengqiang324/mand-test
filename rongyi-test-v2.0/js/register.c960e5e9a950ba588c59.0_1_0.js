(window.webpackJsonp=window.webpackJsonp||[]).push([["register"],{"0bff":function(e,t,s){e.exports=s.p+"img/ry_logo@2x.c0201fe6.png"},"7c9c":function(e,t,s){"use strict";s.r(t);var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logo-header"},[t("img",{attrs:{src:s("0bff"),alt:""}}),t("h4",{staticClass:"title"},[this._v("征信不良 融溢帮忙")])])}],n=(s("a4d3"),s("99af"),s("4de4"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("d3b7"),s("841c"),s("1276"),s("159b"),s("96cf"),s("ade3")),o=(s("3c32"),s("417e")),i=s("10fd"),a=s("b6f9"),c=s("4328"),u=s.n(c),d=s("2f62"),h=s("f7b0");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}var b={name:"ry-register",mixins:[a.a],components:Object(n.a)({},o.a.name,o.a),data:function(){return{checked:!1,disabled:!1,btnShow:!1,tips_show:!1,tips_idCard:!1,changeColor:!1,isKeyBoardShow:[],phoneNumber:"",indtyCode:"",idcardMessage:"",smsCode:"",btnTitle:"获取验证码",index:0}},computed:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){Object(n.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({isClick:function(){return this.phoneNumber&&this.indtyCode?this.checked?{isClick:!0,message:""}:{isClick:!1,message:"请同意用户注册、隐私保护协议"}:{isClick:!1,message:"手机号或验证码不能为空"}}},Object(d.b)({userWxInfo:function(e){return e.user.userWxInfo}})),created:function(){this.showDiaLog()},methods:{onCheck:function(){this.checked=!this.checked},toggleKeyboard:function(e){switch(this.index=e,document.activeElement.blur(),e){case 0:this.isKeyBoardShow[1]&&(this.isKeyBoardShow[1]=!1);break;default:this.isKeyBoardShow[0]&&(this.isKeyBoardShow[0]=!1)}this.$set(this.isKeyBoardShow,e,!this.isKeyBoardShow[e])},onNumberEnter:function(e){switch(this.index){case 0:this.phoneNumber+=e;break;default:this.indtyCode+=e}},onNumberDelete:function(){switch(this.index){case 0:if(""===this.phoneNumber)return;this.phoneNumber=this.phoneNumber.substr(0,this.phoneNumber.length-1);break;default:if(""===this.indtyCode)return;this.indtyCode=this.indtyCode.substr(0,this.indtyCode.length-1)}},getCode:function(){var e,t,s,r,n;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(e=Object(i.b)(this.phoneNumber),t=e.success,s=e.message,t){o.next=5;break}this.$toast({message:s,duration:3e3,position:"bottom"}),o.next=18;break;case 5:if("获取验证码"!=this.btnTitle){o.next=17;break}return r="验证码已发送至 ".concat(this.phoneNumber.substr(0,3),"****").concat(this.phoneNumber.substr(7,4)),o.next=9,regeneratorRuntime.awrap(this.$store.dispatch(Object(h.a)({tel:this.phoneNumber})));case 9:n=o.sent,this.smsCode=n.data.data.smsCode,this.$notify({message:r,color:"#fff",background:"rgba(0,0,0,.7)"}),this.isKeyBoardShow[1]=!0,this.index=1,this.validateBtn(),o.next=18;break;case 17:return o.abrupt("return");case 18:case"end":return o.stop()}}),null,this)},validateBtn:function(){var e=this,t=60,s=setInterval((function(){0==t?(clearInterval(s),e.disabled=!1,e.btnTitle="获取验证码"):(e.btnTitle=t+"秒后重试",e.disabled=!0,t--)}),1e3)},onLogin:function(){var e,t,s,r;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.btnShow=!1,e=this.isClick,t=e.isClick,s=e.message,t){n.next=5;break}return this.$toast({message:s,duration:3e3,position:"bottom"}),n.abrupt("return");case 5:return n.next=7,regeneratorRuntime.awrap(this.$store.dispatch(Object(h.f)({smsCode:this.smsCode,validCode:this.indtyCode})));case 7:(r=n.sent).data&&r.data.success?this.submit():this.$toast({message:r.data.message,duration:3e3,position:"bottom"});case 9:case"end":return n.stop()}}),null,this)},submit:function(){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.userWxInfo.openId){e.next=2;break}return e.abrupt("return",this.getUserInfo());case 2:return e.next=4,regeneratorRuntime.awrap(this.$store.dispatch(Object(h.d)({tel:this.phoneNumber,nickName:this.userWxInfo.nickname,wxOpen:this.userWxInfo.openId,headImage:this.userWxInfo.headImgUrl})));case 4:e.sent.data.success&&this.login();case 6:case"end":return e.stop()}}),null,this)},login:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(this.$store.dispatch(Object(h.b)({username:this.phoneNumber})));case 2:(e=t.sent).data.success&&(e.data.data.isCert?(this.$store.dispatch("showDiaLog",!1),this.$router.push("/")):this.$store.dispatch("showDiaLog",!0));case 4:case"end":return t.stop()}}),null,this)},getUserInfo:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:(e=u.a.parse(location.search.split("?")[1])).code&&this.$store.dispatch(Object(h.e)({code:e.code}));case 2:case"end":return t.stop()}}),null,this)},onReAgree:function(){this.$router.push("/reagree")},onReProtocol:function(){this.$router.push("/reprotocol")}}},p=(s("bf6e"),s("2877")),f=Object(p.a)(b,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"register-box"},[e._m(0),s("div",{staticClass:"user-info"},[s("div",{staticClass:"user-name border-1px"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],ref:"input0",attrs:{type:"text",placeholder:"请输入手机号码",readonly:"readonly"},domProps:{value:e.phoneNumber},on:{focus:function(t){return e.toggleKeyboard(0)},input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}})]),s("div",{staticClass:"user-number border-1px"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.indtyCode,expression:"indtyCode"}],ref:"input1",attrs:{type:"text",placeholder:"请输入6位验证码",readonly:"readonly"},domProps:{value:e.indtyCode},on:{focus:function(t){return e.toggleKeyboard(1)},input:function(t){t.target.composing||(e.indtyCode=t.target.value)}}}),s("span",{staticClass:"getcode",attrs:{disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.getCode(t)}}},[e._v(" "+e._s(e.btnTitle)+" ")])]),s("p",{staticClass:"register-tips"},[e._v("若您未注册，验证后自动注册并登陆")]),s("div",{staticClass:"register-agree"},[s("van-checkbox",{staticClass:"register-checkbox",attrs:{"checked-color":"#ff4300",shape:"square","icon-size":"15px","label-disabled":!0},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[s("span",{staticClass:"login-agree",on:{click:e.onCheck}},[e._v("登录即同意")]),s("span",{staticClass:"register-span",on:{click:e.onReAgree}},[e._v("《用户注册协议》")]),s("span",{staticClass:"register-span register-icon",on:{click:e.onReProtocol}},[e._v("《用户隐私保护协议》")])])],1)]),s("div",{staticClass:"register-login"},[s("ry-button",{attrs:{"btn-title":"登录","btn-show":e.btnShow},on:{touchbefore:e.touchbefore,touchafter:e.onLogin}})],1),s("div",{staticClass:"keyboard"},[s("md-number-keyboard",{attrs:{"hide-dot":""},on:{enter:e.onNumberEnter,delete:e.onNumberDelete},model:{value:e.isKeyBoardShow[0],callback:function(t){e.$set(e.isKeyBoardShow,0,t)},expression:"isKeyBoardShow[0]"}}),s("md-number-keyboard",{attrs:{"hide-dot":""},on:{enter:e.onNumberEnter,delete:e.onNumberDelete},model:{value:e.isKeyBoardShow[1],callback:function(t){e.$set(e.isKeyBoardShow,1,t)},expression:"isKeyBoardShow[1]"}})],1)])}),r,!1,null,null,null);t.default=f.exports},9524:function(e,t,s){},bf6e:function(e,t,s){"use strict";var r=s("9524");s.n(r).a}}]);